<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics</title>
    <link rel="icon" href="assets/images/color.png" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/analytics.css">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        
        <!-- Section: Total -->
        <section class="section" id="total">
            <h2>Dados Totais</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <i class="fas fa-users icon"></i>
                    <div class="info">
                        <span>Audiência Total</span>
                        <h2 id="totalAudience"></h2>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fas fa-chart-bar icon"></i>
                    <div class="info">
                        <span>Impacto</span>
                        <h2 id="totalImpact"></h2>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fas fa-sync-alt icon"></i>
                    <div class="info">
                        <span>Frequência Média</span>
                        <h2 id="frequency"></h2>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fas fa-clock icon"></i>
                    <div class="info">
                        <span>Dwell Time</span>
                        <h2 id="dwellTime"></h2>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fas fa-calendar-alt icon"></i>
                    <div class="info">
                        <span>Mediana de Dias Monitorados</span>
                        <h2 id="medianDays"></h2>
                    </div>
                </div>
                <div class="metric-card">
                    <i class="fas fa-map-marker-alt icon"></i>
                    <div class="info">
                        <span>Localizações</span>
                        <h2 id="locations"></h2>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Endereços -->
        <section class="section" id="address">
            <h2>
              <i class="fas fa-map-marker-alt"></i> Endereços
              <button class="toggle-button" onclick="toggleSection('address')">
                <i class="fas fa-chevron-up"></i>
              </button>
            </h2>
            <div class="address-container">
                <table id="addressesTable" class="address-table">
                    <thead>
                        <tr>
                            <th data-column="local">Local <span class="sort-icon"></span></th>
                            <th data-column="audiencia">Audiência <span class="sort-icon"></span></th>
                            <th data-column="impacto">Impactos <span class="sort-icon"></span></th>
                            <th data-column="frequencia">Frequência média <span class="sort-icon"></span></th>
                            <th data-column="dwellTime">Dwell Time <span class="sort-icon"></span></th>
                            <th data-column="medianDays">Mediana de dias monitorados <span class="sort-icon"></span></th>
                            <th data-column="minDate">Data mínima <span class="sort-icon"></span></th>
                            <th data-column="maxDate">Data máxima <span class="sort-icon"></span></th>
                        </tr>
                    </thead>
                    <tbody id="addressesList">
                        <!-- Endereços serão adicionados dinamicamente pelo JS -->
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Section: Audience x Impact -->
        <section class="section" id="audience-impact">
            <h2>
                <i class="fas fa-chart-line"></i> Total por dia e semana
                <button class="toggle-button" onclick="toggleSection('audience-impact')">
                    <i class="fas fa-chevron-up"></i>
                </button>
            </h2>
            <div class="audience-impact-container">
                <h3>Análise Diária Audiência x Impactos</h3>
                <div class="audience-impact-wrapper">
                    <div class="chart-container chart-scroll-container">
                        <div class="chart-body">
                            <canvas id="dailyChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-data-table">
                        <table id="audienceTable" class="audience-table">
                            <thead>
                                <tr>
                                    <th data-column="date">Data <span class="sort-icon"></span></th>
                                    <th data-column="audience">Audiência <span class="sort-icon"></span></th>
                                    <th data-column="impact">Impacto <span class="sort-icon"></span></th>
                                    <th data-column="dwell_time">Dwell Time <span class="sort-icon"></span></th>
                                </tr>
                            </thead>
                            <tbody id="dailyDataTable"></tbody>
                        </table>
                    </div>
                </div>
                    
                <h3>Análise Semanal Audiência x Impactos</h3>
                <div class="audience-impact-wrapper">
                    <div class="chart-container chart-scroll-container">
                        <div class="chart-body">
                            <canvas id="weeklyChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-data-table">
                        <table id="audienceTable-weekly" class="audience-table-weekly">
                            <thead>
                                <tr>
                                    <th data-column="day">Dia da Semana <span class="sort-icon"></span></th>
                                    <th data-column="audience">Audiência <span class="sort-icon"></span></th>
                                    <th data-column="impact">Impacto <span class="sort-icon"></span></th>
                                    <th data-column="dwell_time">Dwell Time <span class="sort-icon"></span></th>
                                </tr>
                            </thead>
                            <tbody id="weeklyDataTable"></tbody>
                        </table>
                    </div>
                </div>


            </div>
        </section>

        <!-- Section: Média por Hora e Turno -->
        <section class="section" id="avg">
            <h2>
                <i class="fas fa-clock"></i> Média por Hora e Turno
                <button class="toggle-button" onclick="toggleSection('avg')">
                    <i class="fas fa-chevron-up"></i>
                </button>
            </h2>
            <div class="avg-container">
                <h3>Média de Impactos por Hora</h3>
                <canvas id="hourlyChart"></canvas>

                <h3>Média de Impactos por Turno</h3>
                <canvas id="shiftChart"></canvas>
            </div>
        </section>
        
        <!-- Section: Recorrência -->
        <section class="section" id="recurrence">
            <h2>
                <i class="fas fa-id-badge"></i> Recorrência
                <button class="toggle-button" onclick="toggleSection('recurrence')">
                    <i class="fas fa-chevron-up"></i>
                </button>
            </h2>
            <div class="recurrence-container">
                <div class="audience-impact-wrapper">
                    <div class="chart-recurrence-container">
                        <canvas id="recurrenceChart"></canvas>
                    </div>
                    <div class="chart-recurrence-data-table">
                        <table id="recurrenceTable" class="recurrence-table">
                            <thead>
                                <tr>
                                    <th data-column="recurrence">Recorrência <span class="sort-icon"></span></th>
                                    <th data-column="value">Valor <span class="sort-icon"></span></th>
                                    <th data-column="percentage">Porcentagem <span class="sort-icon"></span></th>
                                </tr>
                            </thead>
                            <tbody id="recurrenceDataTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Câmeras -->
        <section class="section" id="cameras">
            <h2>
                <i class="fas fa-video"></i> Câmeras
                <button class="toggle-button" onclick="toggleSection('cameras')">
                    <i class="fas fa-chevron-up"></i>
                </button>
            </h2>
            <div class="cameras-container">
                <h3>Média de Impactos por Data</h3>
                <div class="chart-cameras-container chart-scroll-container">
                    <div class="chart-body-cameras">
                        <canvas id="camerasChart"></canvas>
                    </div>
                </div>
                <div class="chart-data-table">
                    <table id="camerasTable" class="cameras-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Carros</th>
                                <th>Ônibus</th>
                                <th>Caminhões</th>
                                <th>Vans</th>
                                <th>Motos</th>
                                <th>Pessoas</th>
                                <th>Total</th>
                                <th>Câmera</th>
                                <th>Data</th>
                            </tr>
                        </thead>
                        <tbody id="camerasDataTable"></tbody>
                    </table>
                    <div class="pagination-controls">
                        <button id="prevPage">&#9664;</button>
                        <span id="pageInfo">Página 1 de X</span>
                        <button id="nextPage">&#9654;</button>
                    </div>
                </div>
            </div>
        </section>

    </div>
    <script src="assets/js/analytics.js"></script>
    <script src="assets/js/constjson.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/2.2.0/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>    

</body>
</html>